<!DOCTYPE html>
<html>
  <head>
    <title>{% block title %}Paper Trading{% endblock %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='Style.css') }}"
    />
    <script
      src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js"
      type="module"
    ></script>
  </head>
  <body>
    <nav>
      <a href="{{url_for('home_route.home')}}">Home</a>
      {% if current_user.is_authenticated %}
      <a href="{{url_for('home_route.dashboard')}}">dashboard</a>
      <a href="{{url_for('auth_route.logout')}}">Logout</a>
      {% else %}
      <a href="{{url_for('auth_route.login')}}">Login</a>
      <a href="{{url_for('auth_route.register')}}">Register</a>
      {% endif %}
      <label class="toggle-switch">
        <input type="checkbox" id="darkModeToggle" />
        <span class="slider"></span>
      </label>
    </nav>
    <p>
      Logged in as: {{ current_user.email if current_user.is_authenticated else
      "Not logged in" }}
    </p>
    <!-- Dark Mode Toggle -->

    {%with messages = get_flashed_messages(with_categories=true)%} {% if
    messages %}
    <ul id="flash-messages">
      {% for category, message in messages %}
      <li class="flash {{ category }}">{{ message }}</li>
      {% endfor %}
    </ul>
    {% endif %} {% endwith %} {% block content %}{% endblock %}
  </body>
  <script>
    setTimeout(function () {
      const flash = document.getElementById("flash-messages");
      if (flash) {
        flash.style.display = "none";
      }
    }, 2000); // ðŸ‘ˆ 4000ms = 4 seconds

    const toggle = document.getElementById("darkModeToggle");
    const body = document.body;

    toggle.addEventListener("change", function () {
      body.classList.toggle("dark-mode");

      // Save preference
      localStorage.setItem("darkMode", body.classList.contains("dark-mode"));
    });

    // Load saved preference
    if (localStorage.getItem("darkMode") === "true") {
      body.classList.add("dark-mode");
      toggle.checked = true;
    }
  </script>
</html>
